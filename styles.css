/* --- Color Variables --- */
:root {
  /* Default Orange Theme */
  --primary-color: #FF7F50;    /* Coral */
  --secondary-color: #FF4500; /* Deep Orange */
  --accent-color-glow: rgba(255, 127, 80, 0.5);
  --accent-color-border: #FF7F50;
  --accent-color-typing: #FFA500; /* Slightly different orange for typing */

  /* Cyberpunk colors for H1 animation (globally defined) */
  --cyberpunk-color-1: #9400D3; /* Dark Violet */
  --cyberpunk-color-2: #FF69B4; /* Hot Pink/Rose */
  --cyberpunk-color-3: #36013F; /* Deep Purple/Dark */
}

/* Light Blue Theme */
body.theme-blue {
  /* Overrides for cyberpunk feel */
  --primary-color: var(--cyberpunk-color-1); /* Dark Violet */
  --secondary-color: var(--cyberpunk-color-2); /* Hot Pink/Rose */
  --accent-color-glow: rgba(148, 0, 211, 0.5); /* Violet glow */
  --accent-color-border: var(--cyberpunk-color-2); /* Hot Pink border */
  --accent-color-typing: var(--cyberpunk-color-3); /* Dark Purple typing */

  /* Darker background for cyberpunk feel */
  background: #1a001a; /* Dark Purple/Black */
  color: #ffffff; /* White text for better contrast on dark background */
}

/* --- Base Reset --- */
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Orbitron', sans-serif; }

body {
  display: flex;
  flex-direction: row; /* Use flex-direction row for sidebar and main content */
  height: 100vh;
  overflow: hidden; /* Prevent body scroll */
  background-image: url('/path/to/your/space-background.jpg'); /* Replace with your chosen space image URL */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  /* Fallback for browsers that don't support background-attachment: fixed */
  background-attachment: fixed;
  /* Optional: Add a subtle starfield effect if the main image is transparent or dark */
  /* background-image: url('/path/to/starfield.png'), url('/path/to/your/space-background.jpg'); */
  /* background-repeat: repeat, no-repeat;
  background-position: center, center; */
}

/* --- Sidebar --- */
.sidebar {
  width: 250px; /* Expanded width */
  background-color: #f8f8f8; /* Light background for sidebar - will be overridden by theme */
  border-right: 1px solid #e0e0e0; /* Subtle border */
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease-in-out, transform 0.3s ease-in-out;
  overflow: hidden; /* Hide content that overflows */
  flex-shrink: 0; /* Prevent sidebar from shrinking */
  box-shadow: 0 0 15px rgba(148, 0, 211, 0.3);
}

/* When theme-blue is applied, adjust sidebar background */
body.theme-blue .sidebar {
  background-color: #2c002c; /* Darker purple background for sidebar in blue theme */
  border-right-color: var(--cyberpunk-color-1); /* Violet border */
}

.sidebar.collapsed {
  width: 60px;
}
/* Styles for content within the collapsed sidebar */
.sidebar.collapsed .sidebar-header a, /* Logo text will be hidden */
.sidebar.collapsed .sidebar-menu li a { /* Menu item text will be hidden */
  display: none;
}

/* Ensure the sign-in button is displayed and styled as a compact icon */
.sidebar.collapsed .sidebar-footer button {
  display: flex; /* Use flex for centering */
  align-items: center;
  justify-content: center;
  font-size: 0; /* Hide text */
  padding: 0;
  width: 35px; /* Fixed width */
  height: 35px; /* Fixed height */
  border-radius: 50%; /* Circular button */
  background-color: var(--primary-color); /* Theme color */
  box-shadow: 0 0 5px var(--accent-color-glow);
  text-indent: -9999px; /* Hide text */
  overflow: hidden; /* Hide overflow text */
}

.sidebar.collapsed .sidebar-header {
  padding: 15px 5px;
}
.sidebar.collapsed .sidebar-menu li {
  justify-content: center;
  padding: 12px 10px;
}
.sidebar.collapsed .sidebar-menu li .icon {
  margin-right: 0;
}

.sidebar.collapsed .sidebar-footer {
  display: flex; /* Make footer visible */
  flex-direction: column; /* Stack icon and button */
  align-items: center;
  justify-content: center;
  padding: 10px 5px; /* Adjust padding */
  border-top: none; /* Remove border if it looks odd */
  gap: 5px; /* Adjust gap */
}

/* Ensure the icon (ðŸ‘¤) is visible and styled */
.sidebar.collapsed .sidebar-footer .icon {
  margin-right: 0;
  display: block; /* Ensure icon is visible */
  font-size: 1.3rem; /* Slightly larger icon */
  color: white; /* Ensure icon color is visible */
}

/* Adjustments for the theme-blue */
body.theme-blue .sidebar.collapsed .sidebar-footer button {
  background-color: var(--cyberpunk-color-2); /* Hot Pink */
  box-shadow: 0 0 5px var(--cyberpunk-color-2);
}
body.theme-blue .sidebar.collapsed .sidebar-footer .icon {
  color: white;
}

.sidebar-header {
  padding: 20px 15px;
  background-color: var(--primary-color); /* Use variable */
  color: white;
  text-align: center;
  font-weight: bold;
  font-size: 1.3rem; /* Increased font size */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
.sidebar-header .logo-icon { font-size: 1.3rem; }
.sidebar-header a {
  color: white;
  text-decoration: none;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.7);
}
.sidebar-header .sidebar-toggle {
  background: none;
  border: none;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  margin-left: auto; /* Push button to the right */
  padding: 5px;
  display: block; /* Ensure it's displayed */
}

.sidebar-menu {
  list-style: none;
  padding: 10px 0;
  flex-grow: 1; /* Allow menu to take available space */
}
.sidebar-menu li {
  display: flex;
  align-items: center;
  padding: 12px 15px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: #333333; /* Default text color */
}
/* Adjust menu item colors for the cyberpunk theme */
body.theme-blue .sidebar-menu li {
  color: #ffffff; /* White text for menu items */
}
.sidebar-menu li:hover {
  background-color: #f0f0f0; /* Light gray on hover */
}
/* Adjust hover color for cyberpunk theme */
body.theme-blue .sidebar-menu li:hover {
  background-color: #4b0082; /* Indigo hover for cyberpunk */
}
.sidebar-menu li .icon {
  margin-right: 15px;
  font-size: 1.1rem;
  width: 20px; /* Fixed width for icons */
  text-align: center;
}
.sidebar-menu li a {
  text-decoration: none;
  color: inherit;
  font-weight: bold; /* Made font bold */
  font-size: 1.2rem; /* Increased font size */
  flex-grow: 1; /* Allow text to take remaining space */
}

.sidebar-footer {
  padding: 15px;
  text-align: center;
  border-top: 1px solid #e0e0e0; /* This is the border we are changing */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px; /* Adjusted gap for icons and buttons */
  flex-wrap: wrap; /* Allow items to wrap */
}
/* Specific override for the border in theme-blue */
body.theme-blue .sidebar-footer {
  border-top-color: var(--cyberpunk-color-1); /* Violet border */
}
.sidebar-footer .icon { font-size: 1.1rem; margin-right: 5px; } /* Add margin to icons */
.sidebar-footer button {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--primary-color); /* Use variable */
  font-family: 'Orbitron', sans-serif;
  font-size: 1.1rem; /* Increased font size */
  font-weight: 500;
  transition: color 0.2s ease;
}
.sidebar-footer button:hover {
  color: var(--secondary-color); /* Use variable */
}

/* New style for footer buttons */
.sidebar-button {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--primary-color); /* Use variable */
  font-family: 'Orbitron', sans-serif;
  font-size: 1.1rem; /* Increased font size */
  font-weight: 500;
  transition: color 0.2s ease;
}
.sidebar-button:hover {
  color: var(--secondary-color); /* Use variable */
}

body.theme-blue .sidebar-button {
  color: white;
}

/* Main content area */
#main-content {
  flex-grow: 1; /* Take up remaining space */
  display: flex;
  flex-direction: column;
  overflow-y: auto; /* Allow scrolling for main content */
  margin-left: 250px; /* Default margin when sidebar is expanded */
  transition: margin-left 0.3s ease-in-out;
}

/* When sidebar is collapsed, adjust main content margin */
.sidebar.collapsed + #main-content {
  margin-left: 60px;
}

/* Chat container */
.chat-container.centered { 
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 20px;
  padding: 20px;
  overflow: hidden;
}
.chat-container.bottom-aligned { 
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  gap: 10px;
  padding: 20px;
  overflow: hidden;
}

/* Chat body */
.chat-body { 
  width: 100%; 
  max-width: 700px;
  display: flex;
  flex-direction: column;
  gap: 12px; /* Increased gap for messages */
  overflow-y: visible;
  scroll-behavior: smooth;
  min-height: 150px;
}
.chat-body.empty { justify-content: center; align-items: center; }
.chat-body.empty::before { 
  content: ""; /* Removed content to avoid duplicate message */
  color: var(--accent-color-typing); /* Use variable */
  font-style: italic;
}

/* Input wrapper */
.input-wrapper { 
  display: flex;
  width: 100%;
  max-width: 700px;
  gap: 10px;
  background-color: rgba(255, 255, 255, 0.95); /* Lighter background for input */
  padding: 10px;
  border-radius: 15px;
  border: 1px solid var(--accent-color-border); /* Use variable */
  box-shadow: 0 0 10px var(--cyberpunk-color-2); /* Use variable */
}
.input-wrapper textarea { 
  flex: 1;
  padding: 12px;
  border-radius: 8px;
  border: none;
  outline: none;
  resize: none;
  font-size: 1.15rem;
  background: transparent;
  color: #333333; /* Dark gray text */
}
.input-wrapper button { 
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  background: var(--primary-color); /* Changed to primary color (Violet) */
  color: #ffffff; /* White text on button */
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 8px var(--accent-color-glow); /* Violet glow */
}
.input-wrapper button:hover { 
  background: var(--secondary-color); /* Use variable */
  box-shadow: 0 0 12px var(--accent-color-glow); /* Use variable */
}

/* Messages */
.message { 
  padding: 14px 18px;
  border-radius: 15px;
  max-width: 75%;
  word-wrap: break-word;
  line-height: 1.5;
  font-size: 1.15rem;
  border: 1px solid transparent; /* Placeholder for border */
}
.user { 
  align-self: flex-end;
  border-bottom-right-radius: 4px;
  background: var(--primary-color); /* Use variable */
  color: white; /* White text for user message */
  box-shadow: 0 0 5px var(--primary-color); /* Use variable */
}
.bot { 
  align-self: flex-start;
  border-bottom-left-radius: 4px;
  background: #ffffff; /* White bot message */
  border: 1px solid var(--secondary-color); /* Use variable */
  box-shadow: 0 0 5px var(--secondary-color); /* Use variable */
  color: #333333; /* Dark gray text for bot */
}

/* Typing indicator */
.typing { 
  font-style: italic;
  opacity: 0.7;
  color: var(--accent-color-typing); /* Use variable */
}

/* Animation */
@keyframes subtleGlow { 
  0% { box-shadow: 0 0 5px var(--accent-color-glow); } /* Updated glow color */
  50% { box-shadow: 0 0 10px var(--accent-color-glow); } /* Updated glow color */
  100% { box-shadow: 0 0 5px var(--accent-color-glow); } /* Updated glow color */
}
.message.user, .message.bot {
  animation: subtleGlow 3s infinite;
}

/* Responsive */
@media(max-width: 768px) {
  .sidebar { width: 60px; } /* Collapsed on small screens */
  .sidebar.collapsed { width: 60px; } /* Ensure it stays collapsed */
  .sidebar-header, .sidebar-menu li .icon ~ *, .sidebar-footer { display: none; } /* Hide text in collapsed sidebar */
  .sidebar-header { padding: 15px 5px; }
  .sidebar-menu li { justify-content: center; padding: 12px 10px; }
  .sidebar-menu li .icon { margin-right: 0; } 

  .main-content { margin-left: 60px; } /* Adjust main content margin */
  .chat-body { max-width: 100%; }
  .input-wrapper textarea { height: 45px; }
  .header .logo { font-size: 1.3rem; }
  .header .menu a, .header .menu button { margin-left: 10px; font-size: 0.9rem; }

  /* Ensure chat container is bottom-aligned on mobile */
  .chat-container {
    justify-content: flex-end; /* Move content to bottom */
  }
}


/* --- Cyberpunk H1 Animation --- */
.chat-body.empty h1 {
  font-size: 3.5rem; /* Font size before mobile adjustment */
  font-weight: 900;
  text-align: center;
  text-shadow: 0 0 10px #ff00ff; /* Neon pink glow */
  white-space: nowrap; /* Prevent line breaks */
  display: block; /* Needed for styling */
}

/* Violet Animation (Reverted to original vibrant colors) */
@keyframes h1VioletCycle {
  0%   { color: #DC143C; } /* Crimson */
  25%  { color: #FF00FF; } /* Magenta */
  50%  { color: #00FFFF; } /* Cyan */
  75%  { color: #FF1493; } /* Deep Pink */
  100% { color: #4B0082; } /* Indigo */
}

h1 .second-part-violet {
  animation: h1VioletCycle 5s infinite linear;
  /* Removed animation-delay to ensure immediate start */
}